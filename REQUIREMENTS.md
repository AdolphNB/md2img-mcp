# Word2Img MCP 服务需求总结

## 概述
- 将输入的 Markdown 文本渲染为 3:4 比例的 JPG 图片。
- 输出图片清晰、可读性高，文本自动排版并避免贴边。
- 作为 MCP 服务提供两个工具接口：接收文本、回传图片。

## 目标
- 输入：Markdown 格式的文本
- 输出：JPG 图片（3:4，默认 1200×1600），背景为白或其它浅色，文本高可读性

## 工具接口
- submit_markdown(markdown_text, align='center'|'left', bold=False, width=1200) -> task_id
  - 接收 Markdown 文本，渲染并保存图片，返回任务ID。
  - 参数：
    - align：文本水平对齐方式（默认居中，可左对齐）
    - bold：是否加粗显示（默认否）
    - width：输出宽度，等比计算高度维持 3:4（默认 1200）
- get_image(task_id, as_base64=True|False) -> str
  - 根据任务ID返回图片。
  - 当 as_base64=True 返回 Base64 字符串；否则返回图片文件路径。

## 渲染与排版规则
- 自动换行：根据可用宽度自适应换行，避免文本延伸到边缘。
- 内边距：左右为宽度的 8%，上下为高度的 8%。
- 字体：在 72～24 号范围内自适应；根据文本长度自动选取合适字号。
- 对齐：默认居中，可选左对齐。
- 加粗：可通过参数启用。
- 文字颜色：深色（如 #141414），与浅色背景形成对比，确保可读。

## 输出规范
- 图片格式：JPG
- 分辨率与比例：3:4（默认 1200×1600，可通过 width 参数调整宽度）
- 质量：高质量导出（如 JPEG quality≥95，避免明显压缩失真）

## 约束
- 背景为纯白或其它浅色，不添加纹理、图案或多余元素。
- 文本尽量居中；长文本自动换行且不触碰边缘。
- 生成结果要求清晰、辨识度高。

## 运行与依赖管理（uv）
- 使用 uv 管理依赖与运行：
```bash
pipx install uv
uv sync
uv run python server.py
```
- 运行后将生成示例图片 `outputs/_sample.jpg`，并暴露 MCP 工具。

## 后续可扩展（可选）
- 更丰富的 Markdown 样式（标题层级字号、粗体、列表缩进、代码块等）。
- 自定义字体、主题色与行距参数。
- 文本阴影/描边以提升浅色背景下的可读性（遵循“无额外背景元素”约束）。
